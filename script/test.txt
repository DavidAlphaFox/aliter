#---------------------------------
# This is a test script for Aliter
#---------------------------------

# Define a NPC
# Syntax: <id> "name" [position] spriteID
# "id" is optional
npc <tester> "Testing" [prontera,154,190,4] 106
    # Define the NPC's name, used by 'say', defaults to definition name
    name "Prontera Guide"
    
    # Display a cut-in image in the bottom right hand corner
    cutin prt_soldier 2
    
    # Display a message with the NPC's name at the top of each page in square brackets
    say "Banana Man"
        Welcome to Prontera,
        the beautiful capital of the
        Rune-Midgarts Kingdom. If
        you have questions or need
        help finding something in the
        city, don't hesitate to ask.
        
        And this is a new message box
        which is very, very cool!
    
    # Define a local variable
    .loop1 = 1
    
    # Testing comparison expression
    .match = 1
    .match =2
    .match=3
    .match= 4
    .match  =5
    .match   = 6
    .match= 7
    #.compare == 8 # Syntax error
    
    # Define a global variable
    global .banana
    
    # If statements are really just eval'ed
    if not .banana
        # "random" syntax: number1 number2
        # "number2" is optional, if defined result is between "number1" and "number2"
        # inclusive, otherwise a number between 0 and "number1" - 1 is returned
        .banana = random 10
    
    # Do some maths
    .fruit = .banana * 1000
    
    while .loop1
        # Display the "next" button
        next
        
        # The "select" funtions creates a menu listing and returns the selection (First = 0)
        # Surrounding with curly brackets parses the command and returns the result
        switch select "City Guide." "Remove Marks from Mini-Map" "Notice" "Cancel"
            case 1
            case 2
                # Identical to "say" but doesn't place the NPC's name at the top
                # Surrounding variable names with double angled brackets parses them
                message
                    Once upon a time there was
                    a man called <<character.name>> and
                    he had a value of <<fruit>>z
                
                # Display a "close" button but continue executing once clicked
                #close2
                #.loop1 = 0
                break
            case 3
                # Double newlines means to seperate with a next button
                # To force a text newline set first character as "_"
                say
                    Advances in sorcery and
                    technology have allowed
                    us to update our information
                    system, enabling up to mark
                    locations on your Mini-Map
                    for easier navigation.
                    
                    Your Mini-Map is located
                    in the upper right corner
                    of the screen. If you can't
                    see it, press the Ctrl + Tab
                    keys or click the "Map" button in your Basic Info Window.
                    
                    On your Mini-Map,
                    click on the "+" and "-"
                    symbols to zoom in and
                    our of your Mini-Map. We
                    hope you enjoy your travels
                    here in the city of Prontera.
                break
            case 4
                say
                    Well, adventurer...
                    I hope your journeys
                    through Rune-Midgard
                    are both fun and safe.
                close2
                .loop1 = 0
    
    # Hide the cut-in
    hideCutin

# Duplicate a defined NPC
# Syntax: duplicate <id> <newID> "name" [position] spriteID
# Only "id" and "position" is required
duplicate <tester> "My Tester" [prontera,157,190,4]
duplicate <tester> <racTester> "Test NPC" [prontera,151,190,4] 932
duplicate <racTester> [prontera,160,190,4]

# Warps
# Syntax: warp <id> [from] [to] spanX spanY
# "id", "spanX" and "spanY" are optional
# The span is centered around the "from" position
# I.e. width is spanX*2+1 and height is spanY*2+1
warp [prontera,107,215] [prt_in,240,139] 2 2
warp [prt_in,240,141] [prontera,107,218] 3 1
warp [prontera,120,267] [prt_in,180,97] 2 2
warp [prt_in,183,97] [prontera,120,264] 1 2
warp [prontera,133,183] [prt_in,50,105] 2 2
warp [prt_in,53,105] [prontera,136,186] 1 2
warp [prontera,134,221] [prt_in,131,71] 1 1
warp [prt_in,135,71] [prontera,136,219] 1 2
warp [prontera,177,221] [prt_in,168,128] 2 2
warp [prt_in,168,124] [prontera,174,218] 2 1
warp [prontera,179,184] [prt_in,60,73] 2 2
warp [prt_in,60,77] [prontera,175,188] 2 1
warp [prontera,192,267] [prt_in,178,55] 2 2
warp [prt_in,181,55] [prontera,192,264] 1 2
warp [prontera,204,192] [prt_in,68,134] 2 2
warp [prt_in,68,130] [prontera,204,188] 2 1
warp [prontera,208,154] [prt_in,172,29] 2 2
warp [prt_in,172,33] [prontera,205,157] 2 1
warp [prontera,42,67] [prt_in,44,29] 2 2
warp [prt_in,47,29] [prontera,46,67] 2 1
warp [prontera,45,346] [prt_in,80,110] 2 2
warp [prt_in,80,113] [prontera,48,343] 2 1
warp [prontera,73,100] [prt_in,208,176] 1 1
warp [prt_in,208,179] [prontera,76,102] 3 1
warp [prontera,74,90] [prt_in,248,170] 2 2
warp [prt_in,248,173] [prontera,77,93] 3 2
warp [prt_in,282,179] [prontera,87,91] 3 1
warp [prontera,84,89] [prt_in,282,176] 1 1
warp [prt_in,217,163] [prt_in,236,163] 1 3
warp [prt_in,234,163] [prt_in,215,163] 1 3
warp [prt_in,254,113] [prt_in,256,134] 3 2
warp [prt_in,256,131] [prt_in,254,110] 2 2
warp [prt_in,263,163] [prt_in,276,163] 1 3
warp [prt_in,274,163] [prt_in,261,163] 1 3
warp [prt_in,37,65] [prt_in,51,65] 1 3
warp [prt_in,48,65] [prt_in,34,65] 1 3
warp [prt_in,69,65] [prt_in,85,65] 1 3
warp [prt_in,82,65] [prt_in,66,65] 1 3
warp [prt_in,70,143] [prt_in,70,165] 2 1
warp [prt_in,70,162] [prt_in,70,140] 2 1

#.float = 3.14159
#.woo   = 30
#if 21 > 20
#    duplicate <racTester> [prontera,160,184,4]
#if 19 > 20
#    duplicate <racTester> [prontera,160,181,4]
# String comparisons must be single quotes (TODO: Double check with new parser)
#if 'Ban' + 'ana' == 'Banana'
#    duplicate <racTester> [prontera,160,178,4]

#.meh   = 45
#while .meh + 10 < 65
#    if 1
#        .meh = .meh + 1
#    while .ohnoes < 4
#        .ohnoes = .ohnoes + 1
#        duplicate <racTester> [prontera,{148+.ohnoes*3},{178-(.meh-45)*3},{random 8}] {random 900 940}
#    if 1
#        .ohnoes = 0

.sprite = 700
while .y < 5
    .y = .y + 1
    while .x < 5
        .x = .x + 1
        duplicate <racTester> [prontera,{147+.x*3},{178-.y*3},4] .sprite
        .sprite = .sprite + 1
    .x = 0

if 1
    duplicate <racTester> [prontera,167,181,4]
elif 0
    duplicate <racTester> [prontera,170,181,4]
else
    duplicate <racTester> [prontera,173,181,4]

if 0
    duplicate <racTester> [prontera,167,184,4]
elif 1
    duplicate <racTester> [prontera,170,184,4]
else
    duplicate <racTester> [prontera,173,184,4]

if 1
    duplicate <racTester> [prontera,167,187,4]
elif 1
    duplicate <racTester> [prontera,170,187,4]
else
    duplicate <racTester> [prontera,173,187,4]

.meh = 0
while 1
    if 0
        duplicate <racTester> [prontera,167,190,4]
    elif 0
        duplicate <racTester> [prontera,170,190,4]
    else
        duplicate <racTester> [prontera,173,{190 + .meh},4]
    if .meh
        break
    else
        .meh = .meh + 1
